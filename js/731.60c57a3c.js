"use strict";(self["webpackChunkmj_vant"]=self["webpackChunkmj_vant"]||[]).push([[731],{1731:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});var a=function(){var e=this,s=e._self._c;return s("div",[s("van-nav-bar",{attrs:{title:"面经登录"}}),s("van-form",{attrs:{"validate-trigger":"onChange"},on:{submit:e.onSubmit}},[s("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"},{validator:e.validatorUsername,message:"用户名长度需在4-10位字符"}]},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}),s("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{validator:e.validatorPassword,message:"密码长度需在6-10位字符"}]},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",color:"#f96d1c",block:"",type:"info","native-type":"submit"}},[e._v("登录")]),s("router-link",{staticClass:"submitTips",attrs:{to:"/register"}},[e._v("没账号,去注册")])],1)],1)],1)},r=[],n=(t(4114),t(2549)),o={name:"LoginPage",data(){return{username:this.$store.state.user.username,password:this.$store.state.user.password}},methods:{validatorUsername(e){return/\w{4,10}/.test(e)},validatorPassword(e){return/\w{6,10}/.test(e)},async onSubmit(){try{const e=await(0,n.iD)({username:this.username,password:this.password});1e4===e.data.code&&(this.$toast.success("登录成功"),this.$store.dispatch("user/setToken",e.data.data.token),this.$store.dispatch("user/setUserAccount",{username:this.username,password:this.password}),setTimeout((()=>{this.$router.push("/index")}),1500)),console.log(e)}catch(e){console.log(e)}}}},i=o,u=t(1656),l=(0,u.A)(i,a,r,!1,null,"1d35f5e3",null),d=l.exports},2549:function(e,s,t){t.d(s,{iD:function(){return n},kz:function(){return r},ug:function(){return o}});var a=t(8417);const r=e=>a.A.post("/h5/user/register",e),n=e=>a.A.post("/h5/user/login",e),o=()=>a.A.get("/h5/user/currentUser")}}]);
//# sourceMappingURL=731.60c57a3c.js.map