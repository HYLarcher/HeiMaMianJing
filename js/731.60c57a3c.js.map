{"version":3,"file":"js/731.60c57a3c.js","mappings":"0JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,UAAUF,EAAG,WAAW,CAACE,MAAM,CAAC,mBAAmB,YAAYC,GAAG,CAAC,OAASL,EAAIM,WAAW,CAACJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,MAAM,MAAQ,MAAM,YAAc,MAAM,MAAQ,CAAC,CAAEG,UAAU,EAAMC,QAAS,UAAW,CAACC,UAAWT,EAAIU,kBAAmBF,QAAQ,oBAAoBG,MAAM,CAACC,MAAOZ,EAAIa,SAAUC,SAAS,SAAUC,GAAMf,EAAIa,SAASE,CAAG,EAAEC,WAAW,cAAcd,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAW,KAAO,KAAK,MAAQ,KAAK,YAAc,KAAK,MAAQ,CAAC,CAAEG,UAAU,EAAMC,QAAS,SAAU,CAACC,UAAWT,EAAIiB,kBAAmBT,QAAQ,mBAAmBG,MAAM,CAACC,MAAOZ,EAAIkB,SAAUJ,SAAS,SAAUC,GAAMf,EAAIkB,SAASH,CAAG,EAAEC,WAAW,cAAcd,EAAG,MAAM,CAACiB,YAAY,CAAC,OAAS,SAAS,CAACjB,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,GAAG,MAAQ,UAAU,MAAQ,GAAG,KAAO,OAAO,cAAc,WAAW,CAACJ,EAAIoB,GAAG,QAAQlB,EAAG,cAAc,CAACmB,YAAY,aAAajB,MAAM,CAAC,GAAK,cAAc,CAACJ,EAAIoB,GAAG,cAAc,IAAI,IAAI,EACngC,EACIE,EAAkB,G,oBC6BtB,GACAC,KAAA,YACAC,IAAAA,GACA,OACAX,SAAA,KAAAY,OAAAC,MAAAC,KAAAd,SACAK,SAAA,KAAAO,OAAAC,MAAAC,KAAAT,SAEA,EACAU,QAAA,CACAlB,iBAAAA,CAAAmB,GACA,iBAAAC,KAAAD,EACA,EACAZ,iBAAAA,CAAAY,GACA,iBAAAC,KAAAD,EACA,EACA,cAAAvB,GACA,IACA,MAAAyB,QAAAC,EAAAA,EAAAA,IAAA,CAAAnB,SAAA,KAAAA,SAAAK,SAAA,KAAAA,WACA,MAAAa,EAAAP,KAAAS,OACA,KAAAC,OAAAC,QAAA,QACA,KAAAV,OAAAW,SAAA,gBAAAL,EAAAP,KAAAA,KAAAa,OACA,KAAAZ,OAAAW,SAAA,uBAAAvB,SAAA,KAAAA,SAAAK,SAAA,KAAAA,WACAoB,YAAA,KACA,KAAAC,QAAAC,KAAA,YACA,OAEAC,QAAAC,IAAAX,EACA,OAAAY,GAAAF,QAAAC,IAAAC,EAAA,CACA,IC3DoP,I,UCQhPC,GAAY,OACd,EACA7C,EACAuB,GACA,EACA,KACA,WACA,MAIF,EAAesB,EAAiB,O,sHCjBzB,MAAMC,EAAYrB,GAChBsB,EAAAA,EAAQC,KAAK,oBAAqBvB,GAG9BQ,EAASR,GACbsB,EAAAA,EAAQC,KAAK,iBAAkBvB,GAG3BwB,EAAcA,IAClBF,EAAAA,EAAQG,IAAI,uB","sources":["webpack://mj_vant/./src/views/login.vue","webpack://mj_vant/src/views/login.vue","webpack://mj_vant/./src/views/login.vue?6ee0","webpack://mj_vant/./src/views/login.vue?512a","webpack://mj_vant/./src/api/user.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"面经登录\"}}),_c('van-form',{attrs:{\"validate-trigger\":\"onChange\"},on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"用户名\",\"label\":\"用户名\",\"placeholder\":\"用户名\",\"rules\":[{ required: true, message: '请填写用户名' },{validator: _vm.validatorUsername, message:'用户名长度需在4-10位字符'}]},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[{ required: true, message: '请填写密码' },{validator: _vm.validatorPassword, message:'密码长度需在6-10位字符'}]},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"color\":\"#f96d1c\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"登录\")]),_c('router-link',{staticClass:\"submitTips\",attrs:{\"to\":\"/register\"}},[_vm._v(\"没账号,去注册\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-nav-bar title=\"面经登录\" >\r\n    </van-nav-bar>\r\n    <van-form @submit=\"onSubmit\" validate-trigger=\"onChange\">\r\n  <van-field\r\n    v-model=\"username\"\r\n    name=\"用户名\"\r\n    label=\"用户名\"\r\n    placeholder=\"用户名\"\r\n    :rules=\"[{ required: true, message: '请填写用户名' },{validator: validatorUsername, message:'用户名长度需在4-10位字符'}]\"\r\n  />\r\n  <van-field\r\n    v-model=\"password\"\r\n    type=\"password\"\r\n    name=\"密码\"\r\n    label=\"密码\"\r\n    placeholder=\"密码\"\r\n    :rules=\"[{ required: true, message: '请填写密码' },{validator: validatorPassword, message:'密码长度需在6-10位字符'}]\"\r\n  />\r\n  <div style=\"margin: 16px;\">\r\n    <van-button round color=\"#f96d1c\" block type=\"info\" native-type=\"submit\" >登录</van-button>\r\n    <router-link class=\"submitTips\" to=\"/register\">没账号,去注册</router-link>\r\n  </div>\r\n</van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { login } from '@/api/user'\r\n\r\nexport default {\r\n  name: 'LoginPage',\r\n  data () {\r\n    return {\r\n      username: this.$store.state.user.username,\r\n      password: this.$store.state.user.password\r\n    }\r\n  },\r\n  methods: {\r\n    validatorUsername (val) {\r\n      return /\\w{4,10}/.test(val)\r\n    },\r\n    validatorPassword (val) {\r\n      return /\\w{6,10}/.test(val)\r\n    },\r\n    async onSubmit () {\r\n      try {\r\n        const res = await login({ username: this.username, password: this.password })\r\n        if (res.data.code === 10000) {\r\n          this.$toast.success('登录成功')\r\n          this.$store.dispatch('user/setToken', res.data.data.token)\r\n          this.$store.dispatch('user/setUserAccount', { username: this.username, password: this.password })\r\n          setTimeout(() => {\r\n            this.$router.push('/index')\r\n          }, 1500)\r\n        }\r\n        console.log(res)\r\n      } catch (e) { console.log(e) }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.submitTips {\r\n  float: right;\r\n  margin-top: 15px;\r\n  margin-right: 5px;\r\n  color: #5a8ead;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=1d35f5e3&scoped=true\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=1d35f5e3&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d35f5e3\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request.js'\r\n\r\nexport const register = (data) => {\r\n  return request.post('/h5/user/register', data)\r\n}\r\n\r\nexport const login = (data) => {\r\n  return request.post('/h5/user/login', data)\r\n}\r\n\r\nexport const getUserInfo = () => {\r\n  return request.get('/h5/user/currentUser')\r\n}\r\n"],"names":["render","_vm","this","_c","_self","attrs","on","onSubmit","required","message","validator","validatorUsername","model","value","username","callback","$$v","expression","validatorPassword","password","staticStyle","_v","staticClass","staticRenderFns","name","data","$store","state","user","methods","val","test","res","login","code","$toast","success","dispatch","token","setTimeout","$router","push","console","log","e","component","register","request","post","getUserInfo","get"],"sourceRoot":""}